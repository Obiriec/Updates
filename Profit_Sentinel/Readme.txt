// ===================================================================================================
// PROFIT SENTINEL - Sviluppato da Armando Brecciaroli per Fury Team ¬©2023-2025
// Strategia Automatica Multi-Livello con Moduli Dinamici Recovery / TP / RSI Signal Engine
// Versione: 2.3.0 - Sistema Licenze e Controllo Aggiornamenti
// Build Date: 05-06-2025
// Sviluppato per cTrader Automate API
// ¬© Tutti i diritti riservati - Prodotto non ridistribuibile
// ==================================================================================
//
// DESCRIZIONE:
// ProfitSentinel √® un cBot avanzato per la piattaforma cTrader, progettato per la gestione automatizzata
// delle posizioni aperte tramite logiche di Trailing Profit, Take Profit fisso e Recovery Trades progressivi.
// Il sistema integra protezioni avanzate su Free Margin e Margin Level, gestione dinamica del rischio,
// Drawdown Progressivo, Cooldown movimento prezzo, e HUD grafico in tempo reale per la diagnostica operativa.
// Nella versione 1.8.0 sono stati aggiunti sistemi avanzati di analisi del rischio con Value at Risk (VaR),
// previsione della volatilit√† con modelli ML, riconoscimento pattern candlestick e analisi correlazione mercati.
//
// FUNZIONI PRINCIPALI:
// - Apertura iniziale automatica di trade LONG o SHORT selezionabile da menu.
// - Chiusura su Take Profit fisso con gestione opzionale di Drawdown (%).
// - Chiusura su Trailing TP dinamico con gestione Drawdown intelligente e TPStart % dinamico.
// - Sistema di Recovery trades avanzato con moltiplicatore progressivo e protezioni Free Margin e Margin Level.
// - Recovery con distanza minima da BreakEven, peggioramento progressivo del Drawdown, e movimento minimo richiesto.
// - Filtri Recovery: distanza minima pips, conferma RSI multi-condizione, movimento prezzo minimo richiesto.
// - Controllo MinProfit basato su margine usato + percentuale configurabile prima della chiusura profittevole.
// - HUD avanzato e dinamico: profitto, TP, Recovery, margini disponibili, protezioni attive, filtri operativi.
// - Diagnostica RSI Multi-Timeframe con filtri qualit√†: persistenza, delta crescente, curvatura, conferma a N barre.
// - Protezioni contro aperture multiple, spread e timing ingresso personalizzabile (conferma o barra successiva).
// - Massima stabilit√†, gestione sicura ordini e protezioni integrate anti-margin-call.
// - Analisi del rischio avanzata con Value at Risk (VaR) e modelli predittivi di volatilit√†.
// - Riconoscimento pattern candlestick per ottimizzazione segnali e timing entrata.
// - Sistema di monitoraggio correlazione tra mercati per analisi regime e correlazione.
//=======================================================================================================================
//
// CHANGELOG:
//
//    v1.3.6 (16 Aprile 2025)
//           - Prima versione ufficiale pubblica del ProfitSentinel v1.3.6.
//           - Sistema Recovery trades con moltiplicatore progressivo, TP fisso e Trailing TP dinamico.
//           - Controllo MinProfit su margine utilizzato.
//           - HUD grafico dinamico.
//
//    v1.3.7 (18 Aprile 2025)
//           - Correzioni formule Recovery, Break-Even, volumi.
//           - Migliorie HUD e gestione eventi posizioni chiuse.
//
//    v1.3.8 (19 Aprile 2025)
//           - Controllo corretto TP fisso e dinamico rispetto MinProfit (margine usato).
//           - Avvisi in HUD se TP insufficienti.
//           - Ottimizzazione descrizioni parametri Recovery Filters.
//
//    v1.5.0 (23 Aprile 2025)
//           - Recovery avanzato: distanza BreakEven, peggioramento DD richiesto.
//           - Introduzione Cooldown movimento minimo prezzo tra Recovery trades.
//           - Gestione riduzione lotto su Free Margin basso.
//
//    v1.5.1 (24 Aprile 2025)
//           - Protezione avanzata su Free Margin minimo (‚Ç¨) e Margin Level minimo (%).
//           - HUD migliorato: alert visivi su Free Margin e Margin Level.
//           - Revisione parametri sicurezza con soglie dirette in ‚Ç¨ e % reali.
//
//    v1.5.2 (24 Aprile 2025)
//           - HUD completamente aggiornato: diagnostica completa Free Margin, Margin Level e filtri Recovery.
//           - Migliorato controllo separato su Free Margin reale (‚Ç¨) e Margin Level (%).
//           - Ottimizzazione alert dinamici a colori in caso di rischio margine basso.
//           - Pulizia finale HUD: rimosse variabili obsolete e protezioni non pi√π usate.
//
//    v1.5.3 (26 Aprile 2025)
//           - Recovery UltraPro: apertura recovery condizionata da nuovo swing/movimento reale + peggioramento ‚Ç¨ netto.
//           - HUD avanzato con Cooldown/Movimento/Gap Drawdown mostrati in formato leggibile.
//           - Refactoring completo in sezioni ordinate e commentate, per manutenzione rapida e sviluppo modulare.
//
//    v1.5.4 (27 Aprile 2025)
//           - Miglioramento del sistema di gestione del rischio con nuove logiche di controllo del drawdown.
//           - Ottimizzazione delle performance del cBot in condizioni di mercato ad alta volatilit√†.
//           - Aggiunta di nuove metriche nel HUD per una migliore visualizzazione delle condizioni di mercato.
//           - Correzione di bug minori e miglioramenti nella stabilit√† complessiva del sistema.
//
//    v1.5.5 (28 Aprile 2025 - Dynamic TPStart & Diagnostica MultiSimbolo Upgrade)
//           - ‚ûï Aggiunto Dynamic TPStart basato su % di Balance/Equity/FreeMargin.
//           - ‚ûï Aggiunta protezione TPStartMinimo per trailing sicuro su TPStart dinamico.
//           - ‚ûï Visualizzazione Dynamic TPStart nell'HUD con colori adattivi, Flash Smooth e icone di stato.
//           - ‚ûï Aggiunta Diagnostica Simboli attivabile da menu: verifica multi-simbolo su HUD.
//           - üî• Semaforo visivo üü¢üü†üî¥ in tempo reale su HUD, con lampeggio rosso su errori gravi.
//           - üõ†Ô∏è Refactoring OnTick con ottimizzazione HUD Ultra-Lightweight senza spam.
//           - üõ†Ô∏è Protezione contro spam log: avviso console intelligente solo ogni 10 secondi su variazioni reali.
//           - üîí Compatibilit√† totale Live + Demo + VPS Ready.
//           - üìà Migliorie finali su performance grafica, gestione eventi, sicurezza ordini.
//
//    v1.5.6 (29 Aprile 2025 - Migliorie HUD e Refactoring Visuale Sicuro)
//           - ‚úÖ Rimozione parametro duplicato HUDesteso, mantenuto solo HUDCompatto (unificazione logica).
//           - ‚úÖ Corretto stato HUD: mostra correttamente "Compatto" o "Esteso" in base al flag attivo.
//           - ‚úÖ Barra HUD distanza BreakEven con riempimento proporzionale corretto (massimo 10 blocchi).
//           - ‚úÖ Refactoring finale `DrawHUD()` e `DrawHUDCompatto()` per coerenza visiva e leggibilit√†.
//           - üîê Nessuna modifica alle logiche operative principali: TP/Recovery invariati.
//           - üß± Versione stabile pronta per distribuzione o pacchettizzazione .algo/.cbotset.
//           - üîß Tutte le modifiche modulari, sicure, integrate senza impatto retroattivo.
//           - üß† Allineato al profilo "Fury Team Release Mode ‚Äì maggio 2025".
//
//    v1.5.7 (30 Aprile 2025 - Colorazione Swing HUD Integrata)
//           - üé® Integrazione completa modulo "HUD Color Dynamic" in DrawHUD().
//           - üéØ Priorit√† di colorazione: Swing ‚ûú TP/Profit ‚ûú Recovery ‚ûú fallback logico (profit/loss).
//           - üåà Colori semitrasparenti contestuali: blu/rosso chiaro in base a Swing attuale.
//           - üîÅ Nessuna sovrascrittura di codice preesistente: blocco integrato in modalit√† isolata.
//           - ‚öôÔ∏è Pronto per estensioni future su RGB dinamico, interpolazione colore o Flash HUD.
//           - üìå Versione 100% modulare e aderente alle direttive: nessuna cancellazione, solo append.
//
//    v1.5.8 (2 Maggio 2025 - Miglioramenti Gestione BreakEven e Debug)
//           - üõ†Ô∏è Fix critico nel calcolo del margine usato con doppio fallback (GetEstimatedMargin + calcolo manuale)
//           - üìä Aggiunti log di debug avanzati per il calcolo del margine e controllo MinProfit
//           - üîç Migliorata la diagnostica HUD per mostrare i dettagli del calcolo del margine
//           - üßπ Pulizia codice e ottimizzazioni minori nelle funzioni di utilit√†
//           - üîÑ Migliorata la gestione degli errori durante il calcolo del margine
//           - üìà Aggiunta visualizzazione del margine calcolato nell'HUD esteso
//           - üõ°Ô∏è Aggiunte ulteriori protezioni contro divisioni per zero e valori non validi
//
//    v1.5.9 (3 Maggio 2025 - Miglioramenti Visualizzazione TP Dinamico)
//           - ‚úÖ Aggiunta visualizzazione esplicita del profitto mancante per raggiungere il TP dinamico
//           - üìå Nell'HUD Esteso: dettaglio numerico "Stato attuale: X‚Ç¨ (mancano Y‚Ç¨ per Z‚Ç¨)"
//           - üì± Nell'HUD Compatto: formato ultra-sintetico con icona ‚úî/‚úñ e importo mancante
//           - üîÑ Nessuna modifica alle logiche operative esistenti, solo miglioramenti visualizzazione
//           - üßπ Ottimizzazione formattazione codice nelle nuove sezioni aggiunte
//           - üõ°Ô∏è Mantenute tutte le protezioni e logiche preesistenti intatte
//
//    v1.5.9-r2 (3 Maggio 2025 - Fix Completo BreakEven Visual + HUD)
//           - ‚úÖ Corretto disegno linea BreakEven: ora usa sempre il prezzo target reale e non EntryPrice
//           - ‚úÖ Etichetta grafica e linea BE aggiornate con prezzo esatto di uscita calcolato
//           - ‚úÖ HUD mostra ora correttamente il prezzo target BreakEven, non pi√π l'entry errato
//           - ‚úÖ Slider pips distanza BreakEven usa offset effettivo dal prezzo target
//           - üîÑ Refactoring DrawBreakEvenLineSafe() e GetBreakEvenPrice() per allineamento corretto
//           - üß† Aggiornati OnTick(), DrawHUD() e HUD compatto per coerenza dati BE
//           - üîß Mantenute intatte tutte le logiche operative (TP, Recovery, MinProfitCheck)
//           - üìå Changelog e intestazione aggiornati alla v1.5.9-r2 (Fury Team Release Mode)
//
//    v1.5.9-r3 (3 Maggio 2025 - Fix HUDCompatto BreakEven Definitivo)
//           - ‚úÖ HUD Compatto aggiornato: ora mostra sempre il prezzo reale di chiusura BreakEven (target), non pi√π l‚ÄôEntryPrice.
//           - ‚úÖ Corretto calcolo e visualizzazione distanza pips nello slider BE, ora allineato al target reale.
//           - ‚úÖ Righe ‚ÄúBE: ... ‚Ç¨‚Äù e ‚ÄúBE Target: ...‚Äù ora derivano da GetBreakEvenTargetPrice() anche nel compatto.
//           - üîÅ Pulizia uso variabile `be` nel metodo DrawHUDCompatto(): sostituito con calcolo diretto coerente.
//           - üõ†Ô∏è Nessun impatto sulle logiche operative o di chiusura reali: solo miglioramento visuale coerente.
//
//    v1.5.9-r4 (3 Maggio 2025 - Fix Finale BreakEven Visual + Calcolo Pips)
//           - ‚úÖ Corretto il calcolo `GetBreakEvenTargetPrice()` con divisione sicura su `PipValue / 100000.0`
//           - ‚úÖ Valore BreakEven ora coerente in HUD, linea grafica e slider pips
//           - ‚úÖ Aggiunto log di debug `üß™ DEBUG BE: Bid=X, BE=Y, PipSize=Z` per facilitare diagnosi
//           - ‚úÖ Eliminati calcoli errati dovuti a unit√† non normalizzate
//           - ‚úÖ Funzionalit√† Breakeven ora 100% stabile e pronta per rilascio definitivo
//    v1.5.9-r4 (3 Maggio 2025 - Fix Finale BreakEven Visual + Calcolo Pips)
//           - ‚úÖ Corretto il calcolo `GetBreakEvenTargetPrice()` con divisione sicura su `PipValue / 100000.0`
//           - ‚úÖ Valore BreakEven ora coerente in HUD, linea grafica e slider pips
//           - ‚úÖ Aggiunto log di debug `üß™ DEBUG BE: Bid=X, BE=Y, PipSize=Z` per facilitare diagnosi
//           - ‚úÖ Eliminati calcoli errati dovuti a unit√† non normalizzate
//           - ‚úÖ Funzionalit√† Breakeven ora 100% stabile e pronta per rilascio definitivo
//
//    v1.6.0 (04 Maggio 2025 - Rilascio Finale Stabile HUD+BE)
//           - üß± Versione finale stabile dichiarata: HUD Esteso e HUD Compatto definitivi
//           - ‚úÖ Corretto duplicato versione nell‚ÄôHUD compatto: ora mostra solo `BUILD_ID` coerente
//           - ‚úÖ Restyling completo `DrawHUDCompatto()`: ora pi√π leggibile, diretto, efficiente
//           - üéØ Tutte le visualizzazioni BE ora coerenti: slider, target, distanza pips
//           - üìå Versione ufficiale *Fury Team Release v1.6.0* marcata come stabile per utilizzo operativo
//           - üöÄ Pronta per compilazione `.algo` e pacchetti `.cbotset` di distribuzione
//
//    v1.6.1 (3 Maggio 2025 - BreakEven Fix: Fisso e Universale)
//           - ‚úÖ Ripristinata logica BreakEven a soglia fissa, evitando comportamento da trailing stop
//           - ‚úÖ `GetBreakEvenTargetPrice()` ora restituisce un valore costante basato su `fixedBreakEvenProfitThreshold`
//           - ‚úÖ Compatibilit√† BreakEven estesa a simboli CFD/indice come GERMANY 40 (TopFX)
//           - ‚úÖ Corretto `DrawBreakEvenLineSafe()` con etichetta a posizione fissa sul prezzo target
//           - ‚úÖ Completato restyling HUDCompatto con slider BE corretto e sintesi visiva migliorata
//           - üîÑ HUD Esteso aggiornato: visualizzazione corretta pips BE e slider adattivo
//           - üîê Nessuna regressione sulle logiche TP dinamico, Recovery o MinProfitCheck
//           - üìå Versione stabile universale per tutti i simboli (Forex, Indici, CFD)
//
//    v1.6.2 (6 Maggio 2025 - Revisione Completa RSI Multi-Timeframe + HUD Diagnostico)
//           - ‚úÖ Rimosso completamente il riferimento a indicatori RSI esterni: ora la logica RSI √® interna e indipendente
//           - üîÅ Refactoring completo dei metodi `IsSegnaleRSIValido()`, `AggiornaRSI()` e `DebugSegnaleRSI()` per gestione multi-timeframe pulita
//           - üìå Valori RSI Base e Superiore gestiti separatamente con memorizzazione, aggiornamento e logging coerente
//           - üß† Nuova diagnostica RSI avanzata: stampa log dettagliati con cooldown, delta RSI e condizioni valide
//           - ‚ú≥Ô∏è Aggiunto supporto forzatura segnale RSI via flag `ForzaSegnaleRSI` (per test e debug)
//           - üéØ HUD aggiornata: visualizzazione coerente dei segnali RSI, incluso disegno grafico segnale su chart
//           - üß± Pulizia completa codice RSI: ora modulare, testabile e compatibile con simboli diversi
//           - ‚úÖ Consolidata la logica ordine da segnale RSI con protezioni anti-duplicazione posizione e label coerenti
//           - üìå Versione ufficiale *Fury Team Release v1.6.3* per RSI Multi-Timeframe & HUD Diagnostico Integrato
//
//    v1.6.3 (6 Maggio 2025 - Consolidamento HUD RSI e Protezioni Iniziali)
//           - ‚úÖ Consolidata struttura HUD con nuova sezione RSI diagnostico: visualizzazione completa LONG/SHORT live
//           - ‚úÖ Aggiunto controllo: blocco segnale RSI se TimeFrame superiore ‚â§ TF base ‚ûú log + HUD warning dedicato
//           - ‚úÖ Migliorata compatibilit√† avvio anche con SL e TP = 0 (ordini senza limiti iniziali ammessi)
//           - ‚ö†Ô∏è Aggiunto warning live: TP segnale troppo stretto, potenziale rischio spread > profitto
//           - ‚úÖ Corretto errore su logica `MinProfitOverMargin`: ora valutato solo con posizioni effettive aperte
//           - ‚úÖ SafeCloseAllPositions() ora chiude tutte le posizioni sul simbolo, ignorando label/commenti
//           - ‚úÖ Cooldown entry RSI ora impedisce doppie aperture: verifica se esistono posizioni aperte nel symbol
//           - üîß Debug OnBar arricchito con diagnostica RSI dettagliata: delta, tempo ultimo segnale, stato valido
//           - üìå Versione ufficiale *Fury Team Release v1.6.3* stabile per segnali RSI, chiusura coerente, entry sicura
//
//    v1.6.4 (6 Maggio 2025 - Trailing TP Reale + Protezione Soglia Garantita)
//           - ‚úÖ TP Dinamico trasformato in vero trailing stop: maxTP viene aggiornato ogni volta che il profitto supera il massimo precedente
//           - ‚úÖ La soglia minima di profitto aggiornata segue esattamente il valore massimo raggiunto con TPDrawdown% costante
//           - ‚úÖ Protezione integrata: se attivo MinProfitCheck, la soglia minima √® sempre la maggiore tra trailing e margine richiesto
//           - ‚úÖ Corretto comportamento SafeCloseAllPositions(): ora chiude solo se il profitto netto √® conforme alla soglia trailing
//           - üß† HUD Esteso aggiornato: visualizza soglia minima dinamica aggiornata + stato trailing real-time
//           - üîç Debug avanzato su ogni update di maxTP, soglia trailing e condizioni di chiusura dinamica
//           - üõ°Ô∏è Protezione aggiuntiva: nessuna chiusura autorizzata se profitto < trailingMinProfit anche se trigger avvenuto
//           - üß± Sincronizzato con struttura HUD v1.6.3: visualizzazione coerente, integrata e completa
//           - üìå Versione ufficiale *Fury Team Release v1.6.4* per trailing TP sicuro e coerente in tempo reale
//
//    v1.6.5 (7 Maggio 2025 - Fix TP Dinamico & Ottimizzazioni HUD)
//           - üõ†Ô∏è Corretto bug: chiusura TP dinamico poteva avvenire anche se maxTP < TPStart
//           - üß† Ora il trailing TP viene attivato solo dopo il reale superamento di TPStart o TPStartPercent
//           - ‚úÖ Aggiunto controllo coerente anche nell'HUD per riflettere solo trailing attivo se triggerato
//           - üì± HUD Compatto aggiornato con messaggi pi√π precisi e ordinati per TP Dinamico e BreakEven
//           - üñ•Ô∏è HUD Esteso allineato per chiarezza, rimozione duplicati, ordine logico delle informazioni
//           - üß™ Migliorato logging: log TP dinamico e BreakEven resi pi√π leggibili e coerenti
//           - üìå Versione ufficiale *Fury Team Release v1.6.5* pronta per build finale
//
//    v1.6.6 (8 Maggio 2025 - Conferma Segnale RSI Multi-Barra & Timing Apertura)
//           - ‚úÖ Introdotto filtro "Conferma Segnale RSI": richiede N barre consecutive valide prima dell'esecuzione ordine
//           - ‚è±Ô∏è Aggiunta opzione di Timing apertura posizione:
//               ‚Ä¢ Alla chiusura della barra che ha confermato il segnale
//               ‚Ä¢ Alla chiusura della barra successiva (maggior prudenza)
//           - üìä Diagnostica HUD aggiornata con stato attesa conferma + metodo di apertura configurato
//           - üß† Log dettagliato delle fasi: accumulo barre, conferma, esecuzione condizionata dal timing selezionato
//           - üîÅ Integrato nel blocco OnBar(), DrawHUD() e parametri generali senza alterare la struttura esistente
//           - üìå Versione ufficiale *Fury Team Release v1.6.6* focalizzata sulla robustezza del timing d'ingresso operazioni
//
//    v1.6.7 (8 Maggio 2025 - Protezione Recovery & Uniformit√† Formula DD)
//           - ‚õî Bloccata l'esecuzione di Recovery se il profitto netto attuale √® positivo ‚ûú protezione obbligatoria
//           - üß† Uniformato il calcolo del drawdown Recovery usando `GetRecoveryReferenceValue()` in tutte le funzioni
//           - üîç Verifica completa delle formule drawdown in OnTick(), ExecuteLogic(), HUD e TryRecovery
//           - üìä HUD aggiornato: DD visualizzato in % uniforme rispetto al riferimento selezionato (Balance, Equity, FreeMargin)
//           - üîÑ Refactoring e controllo approfondito su formula TP Dinamico vs BE per evitare doppi trigger incoerenti
//           - üì¶ Codice completamente validato dopo controllo integrale in 3 sezioni
//           - üìå Versione ufficiale *Fury Team Release v1.6.7* focalizzata sulla protezione Recovery e coerenza formule
//
//    v1.6.8 (9 Maggio 2025 - Fix DD Recovery su Balance + Uniformit√† MinDDIncreasePercent)
//           - üßÆ Corretto il calcolo del DrawDown Recovery: ora sempre basato sul Balance corrente (non pi√π Equity o formule cumulative errate)
//           - üéØ Uniformata la logica `Minimo Peggioramento DD%` ‚ûú confronto ora su base % coerente (DD vs Balance)
//           - ü™™ Log estesi con confronto percentuale tra DD corrente e soglia richiesta ‚ûú visibilit√† piena
//           - üîß Integrazione diretta in `TryRecovery()` con allineamento a tutte le modalit√† Recovery esistenti
//           - ‚úÖ Test e validazione superata in condizioni multiple (trigger, peggioramento, cooldown, sicurezza)
//           - üìå Versione ufficiale *Fury Team Release v1.6.8* con correzione critica drawdown su base balance
//
//    v1.6.9 (10 Maggio 2025 - Patch Etichette RSI + Fix HUD Diagnostico TrendFollowing/Contrarian)
//           - üü¢ Corretto il modulo `DrawSegnaleGraficoRSI()` ‚ûú ora stampa correttamente le etichette LONG/SHORT
//             anche in modalit√† TrendFollowing (le etichette ora si invertono rispetto al segnale grezzo)
//           - üü£ Uniformata la logica dell'HUD RSI ‚ûú Diagnostica Avanzata e Tecnica ora mostrano sempre
//             la direzione operativa coerente con la modalit√† (Contrarian = segnale grezzo; TrendFollowing = inverso)
//           - üîç Migliorata la funzione `GeneraStringaQualitaSegnale()` con coerenza interna e compatibilit√† etichette
//           - üß™ Debug visuale migliorato con stampa `Print()` della modalit√† RSI, direzione segnale grezzo,
//             etichetta stampata e direzione del trade effettivo
//           - ‚úÖ Validato su tutte le combinazioni operative: TrendFollowing/Contrarian, con/contro trend, e
//             tutte le condizioni di Delta/Persistenza/Filtro attivi
//
//    v1.7.0 (13 Maggio 2025 - Fix Recovery Volume & Fattore Potenziamento DD)
//           - ‚úÖ Corretto calcolo volume recovery: ora sempre in multipli di 0.01 lots
//           - üîß Implementato sistema automatizzato per Fattore Potenziamento DD in base alla modalit√†:
//               ‚Ä¢ Standard: usa il valore configurato senza modifiche
//               ‚Ä¢ Bilanciato: richiede +50% del valore base (min +1.5%)
//               ‚Ä¢ Aggressivo: riduce al 60% del valore base (min 1%)
//           - üßÆ Rivista formula calcolo volume recovery:
//               ‚Ä¢ Normalizzazione sempre a 0.01 lots
//               ‚Ä¢ Blocco su volumi inferiori al minimo
//               ‚Ä¢ Gestione coerente moltiplicatore in base alla modalit√†
//           - üõ°Ô∏è Aggiunta protezione volume minimo (0.01) in tutte le funzioni che usano ExecuteMarketOrder
//           - üìä Migliorato sistema di logging per tracciamento calcolo volumi
//           - üîÑ Centralizzata gestione normalizzazione volumi
//           - üéØ Ottimizzato sistema di logging per DD e volumi recovery
//           - üìå Versione ufficiale *Fury Team Release v1.7.0* con fix critici gestione volumi
//
//    v1.7.1 (14 Maggio 2025 - Fix Recovery Avanzato & DD Dinamico)
//           - ‚úÖ Implementato sistema DD dinamico basato sul rapporto tra i lotti
//           - üßÆ Tre modalit√† calcolo DD:
//               ‚Ä¢ Standard: usa radice quadrata (pi√π conservativo)
//               ‚Ä¢ Enhanced: usa radice cubica (medio)
//               ‚Ä¢ Aggressive: usa moltiplicatore diretto (pi√π aggressivo)
//           - üîß Aggiunto parametro DDMultiplier per amplificare effetto (1.0-5.0)
//           - üìä Log dettagliati calcolo DD dinamico con tutti i fattori
//           - üõ°Ô∏è Protezione aggiuntiva su recovery ravvicinati
//           - üîÑ DD richiesto aumenta progressivamente con l'aumento dei lotti
//           - üìà Formula: DD = BaseDD √ó ‚àö(LotRatio) √ó DDMultiplier
//           - üß™ Test approfonditi su tutte le modalit√† di calcolo
//           - üìå Versione ufficiale *Fury Team Release v1.7.1* con fix critici recovery
//
//    v1.8.0 (10 Giugno 2025 - Analisi Avanzata e Sistemi Predittivi)
//           - üß† Implementato sistema Value at Risk (VaR) per analisi rischio avanzata
//           - üìä Aggiunta previsione volatilit√† con modello semplificato
//           - üéØ Riconoscimento pattern candlestick per conferma segnali (Doji, Engulfing, ecc.)
//           - üîÑ Analisi correlazione mercati tra simboli chiave (oro, indici, forex)
//           - üìà HUD arricchito con visualizzazione analisi avanzate (VaR, volatilit√†, pattern)
//           - üìê Centralizzazione calcolo volatilit√† con metodi multipli (Range, ATR, StdDev)
//           - üéØ Migliorato sistema di visualizzazione TP Dinamico con linea grafica interattiva
//           - üìù Aggiunto log dettagliato per calcolo TP Dinamico con parametri precisi
//           - üîß Ottimizzata la gestione della formattazione numerica per diverse valute
//           - üìä Sistema log strutturato con livelli e categorie
//           - üîç Migliorata la precisione del calcolo del prezzo target di uscita
//           - üìå Versione ufficiale *Fury Team Release v1.8.0* - Advanced Risk Analysis
//
//    v1.9.0 (16 Maggio 2025 - Fix Critici & Miglioramenti Stabilit√†)
//           - üõ†Ô∏è Corretto bug critico del TP Dinamico che chiudeva posizioni con profitto inferiore alla soglia
//           - ‚úÖ Implementato sistema robusto di chiusura con tentativo multiplo (fino a 3 retry per posizione)
//           - üîÑ Migliorata gestione BreakEven per mantenerlo attivo anche con TP Dinamico
//           - üìä Corretto il calcolo della tolleranza di chiusura per evitare chiusure premature
//           - üîÑ Migliorato reset di maxTP e tpDinamicoAttivato dopo chiusura di tutte le posizioni
//           - üîç Aggiunto logging dettagliato per diagnosi problemi di chiusura
//           - ‚ö° Ottimizzata protezione spread per prevenire chiusure durante spread elevato
//           - üìà Migliorata coerenza between TP Dinamico e BreakEven con funzionamento parallelo
//           - üß† Logica adattiva per la gestione delle chiusure e rilevamento orfani
//           - üëÅÔ∏è Visualizzazione migliorata del target TP Dinamico sul grafico
//
//    v1.9.1 (17 Maggio 2025 - Sistema Controllo Aggiornamenti e Gestione Licenze)
//           - ‚úÖ Implementato sistema automatico di controllo aggiornamenti
//           - üîê Migliorato sistema di verifica licenze con formato JSON standardizzato
//           - üõ°Ô∏è Aggiunta visualizzazione notifiche su grafico per aggiornamenti disponibili
//           - ‚ö†Ô∏è Gestione aggiornamenti obbligatori con blocco esecuzione
//           - üìã Visualizzazione dettagliata changelog e note di rilascio
//           - üîÑ Verifica periodica degli aggiornamenti (ogni 24 ore)
//           - üìä Integrazione completa con server di licenze e aggiornamenti
//           - üîß Correzioni minori e miglioramenti di stabilit√† generali
//
//    v1.9.2 (22 Maggio 2025 - Sistema Licenze Avanzato con Auto-Nascondimento)
//           - ‚úÖ Migliorata visualizzazione informazioni licenza con formattazione avanzata e dettagliata
//           - ‚è≤Ô∏è Aggiunto parametro configurabile per auto-nascondere il messaggio licenza dopo X secondi
//           - üìä Aggiunto contatore visibile su schermo per il tempo rimanente prima della rimozione
//           - üîß Implementata gestione automatica dello stato di visualizzazione della licenza
//           - üõ°Ô∏è Ottimizzato e centralizzato il sistema di verifica licenza con gestione eventi
//           - üñ•Ô∏è Migliorato posizionamento e formattazione delle informazioni a schermo
//
//    v1.9.3 (26 Maggio 2025 - Filtro Distanza Dinamico Avanzato)
//           - ‚úÖ Migliorato calcolo della distanza di sicurezza con adattamento proporzionale ai lotti aperti
//           - üìä Implementata formula logaritmica per incremento dinamico della distanza minima tra recovery
//           - üßÆ Volume totale delle posizioni aperte ora influisce direttamente sulla distanza richiesta
//           - üõ°Ô∏è Protezione incrementale: maggiore √® l'esposizione, pi√π alta √® la distanza di sicurezza
//           - üîÑ Fattore di scaling volume con crescita progressiva (1.0 + Log10(1.0 + totalOpenLots))
//           - üìà Visibilit√† completa nel log per tutti i fattori di calcolo della distanza dinamica
//
//    v1.9.4 (30 Maggio 2025 - Sistema Integrato di Controllo e Sicurezza)
//           - ‚úÖ Sistema completo di verifica licenze con modalit√† online/offline e controllo integrit√†
//           - üîÑ Implementazione controllo automatico degli aggiornamenti con notifiche interattive
//           - üîê Sistema di blocco operativit√† in caso di aggiornamenti obbligatori disponibili
//           - üõ°Ô∏è Protezione avanzata contro spread anomali con campionamento storico intelligente
//           - üîç Gestione migliorata dei cooldown tra recovery con scaling proporzionale ai volumi
//           - üìä Sistema diagnostico RSI potenziato con metriche di qualit√† e visualizzazione dettagliata
//           - ‚è±Ô∏è Visualizzazioni HUD ottimizzate con auto-nascondimento informazioni non essenziali
//           - üìà Log strutturato a categorie per tracciamento completo delle operazioni
//           - üß† Funzioni diagnostiche avanzate per troubleshooting in tempo reale
//           - üîß Ottimizzazioni prestazionali per riduzione overhead computazionale e HUD
//
//    v2.0.0 (31 Maggio 2025 - Aggiornamento Visualizzazione Recovery e Ottimizzazioni)
//           - ‚úÖ Migliorata visualizzazione della soglia DD minima per recovery nell'HUD
//           - üìä Aggiunta formattazione dettagliata: "Soglia DD minima: 17.23% (8.23% + 9.00%)"
//           - üß† Ottimizzato calcolo decimali per visualizzazione prezzi dinamici
//           - üîÑ Correzioni formattazione numerica con precisione decimali dal broker
//           - üéØ Migliorati calcoli visualizzazione TP dinamico con decimali corretti
//           - üõ°Ô∏è Migliorate protezioni contro errori di arrotondamento prezzi
//           - üì± HUD operativo aggiornato con informazioni pi√π chiare sulla soglia DD
//           - üé® Migliorata formattazione etichette grafiche con decimali broker-specific
//
//    v2.1.0 (01 Giugno 2025 - Miglioramenti Controlli RSI e Filtri)
//           - ‚úÖ Aggiunto controllo ON/OFF per filtro Delta Minimo RSI
//           - ‚úÖ Aggiunto controllo ON/OFF per Barre Conferma Segnale
//           - üîç Migliorata diagnostica per timing aperture posizioni (chiusura barra attuale/successiva)
//           - üìä Log dettagliati sui controlli di validazione segnali e timing esecuzione
//           - üìë Ottimizzazione complessiva dei filtri di qualit√† segnali
//
//    v2.1.1 (10 Giugno 2025 - Fix Logica Contrarian)
//           - ‚úÖ Corretto bug critico nella logica della modalit√† Contrarian
//           - üîÑ Risolto problema di inversione errata dei segnali RSI
//           - ‚ö†Ô∏è In modalit√† Contrarian ora:
//               - Segnale LONG (RSI ipervenduto) ‚Üí apre posizione LONG
//               - Segnale SHORT (RSI ipercomprato) ‚Üí apre posizione SHORT
//           - üß™ Aggiunti test di validazione per tutte le combinazioni di modalit√†/segnali
//           - üìä Migliorata diagnostica con log espliciti della direzione operativa
//
//    v2.1.2 (20 Giugno 2025 - Fix Logica TrendFollowing e HUD)
//           - ‚úÖ Corretto comportamento della modalit√† TrendFollowing
//           - üîÑ Implementata corretta inversione segnali in TrendFollowing:
//               - Segnale LONG (RSI ipervenduto) ‚Üí apre posizione SHORT
//               - Segnale SHORT (RSI ipercomprato) ‚Üí apre posizione LONG
//           - üé® Corretta la visualizzazione della direzione operativa nell'HUD
//           - üìä Aggiornato HUD diagnostico per mostrare segnali coerenti con la modalit√† selezionata
//           - üîç Migliorati log di debug con tracciamento della modalit√† RSI e direzione operativa
//           - üè∑Ô∏è Etichette grafiche ora mostrano correttamente la direzione effettiva dell'operazione
///
//    v2.1.3 (04 Giugno 2025 - Ottimizzazioni generali e miglioramenti performance)
//           - üîÑ Ottimizzazione del sistema di gestione memoria e visualizzazione HUD
//           - ‚ö° Migliorata efficienza calcoli ripetitivi per TP dinamico e recovery
//           - üõ°Ô∏è Rafforzata la gestione degli errori e protezioni di sicurezza
//           - üñ•Ô∏è Ottimizzata visualizzazione HUD con refresh ridotti per migliori performance
//           - üìä Raffinato sistema diagnostico RSI con riduzione overhead computazionale
//           - üöÄ Miglioramenti generali stabilit√† per funzionamento prolungato in VPS
//           - üìù Aggiornato sistema licenze per migliore compatibilit√† e verifica
//
//    v2.2.0 (04 Giugno 2025)
//           - üîë Implementazione sistema completo di licenze online/offline
//           - üõ°Ô∏è Migliorato sistema sicurezza e verifica integrit√† licenza
//           - üîÑ Aggiunto sistema automatico di controllo aggiornamenti
//           - üìã Gestione avanzata aggiornamenti obbligatori/opzionali
//           - üíª Interfaccia migliorata per visualizzazione stato licenza
//           - üìÇ Supporto memorizzazione locale per licenze offline
//
//    v2.3.0 (05 Giugno 2025 - Miglioramenti HUD RSI e Prestazioni)
//           - ‚úÖ Implementata disabilitazione automatica HUD RSI durante posizioni aperte
//           - üõ°Ô∏è Prevenzione gestione segnali RSI durante trade attivi per evitare confusione
//           - üßπ Migliorata visualizzazione HUD con messaggio chiaro sullo stato sospeso
//           - üìà Ottimizzata gestione memoria con minore overhead durante trade attivi
//           - ‚öôÔ∏è Riattivazione automatica analisi RSI dopo chiusura posizioni
//           - üîÑ Migliorata coerenza fra HUD operativo e diagnostico durante operazioni in corso
//
// ============================================================================
